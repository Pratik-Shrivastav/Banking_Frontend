<div *ngIf="loading" class="loading-spinner">
    Loading client details...
</div>

<div *ngIf="error" class="error-message">
    {{ error }}
</div>

<div *ngIf="!loading && client" class="client-details">
    <mat-card class="client-card">
        <mat-card-header class="client-card-header">
            <mat-card-title>{{ client.companyName }}</mat-card-title>
        </mat-card-header>

        <mat-card-content class="client-card-content">
            <div class="client-info">
                <p><strong>Founder Name:</strong> {{ client.founderName }}</p>
                <p><strong>Phone:</strong> {{ client.phone }}</p>
                <p><strong>Address:</strong> {{ client.address }}, {{ client.city }}, {{ client.region }}, {{ client.country }}</p>
                <p><strong>Status:</strong> {{ client.status }}</p>
                <p><strong>Balance:</strong> {{ client.accountDetailsObject.accountBalance | currency:"INR" }}</p>
            </div>
        </mat-card-content>
    </mat-card>
</div>


<div *ngIf="client.beneficiaryList" class="beneficiary-section">
    <h4 class="beneficiary-heading">Payment List</h4>
    <div *ngFor="let beneficiary of client.beneficiaryList">
        <div *ngIf="beneficiary.paymentsList.length">
            <p class="payment-info">
                <strong>Payment For:</strong> <span class="beneficiary-name">{{ beneficiary.benificiaryName }}</span>
            </p>            <table class="payment-table">
                <thead>
                    <tr>
                        <th>Payment Type</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Created At</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngFor="let payment of beneficiary.paymentsList">
                        <tr>
                            <td>{{ payment.paymentType }}</td>
                            <td>{{ payment.amount | currency:"INR"}}</td>
                            <td>{{ payment.status }}</td>
                            <td>{{ payment.createdAt | date: 'short' }}</td>
                            <td>
                                <button mat-button *ngIf="payment.status === 'Pending'" (click)="viewPaymentDetails(beneficiary, payment)">View</button>
                                <button mat-button *ngIf="payment.status === 'Success'" (click)="viewCompletedPayment(payment)">View</button>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>
        </div>
    </div>
</div>


<!-- Salary Disbursement List -->
<div *ngIf="salaryDisbursementList" class="salary-section">
    <h3 class="salary-heading">Salary Disbursement List</h3>
    <div class="table-container">
        <table class="salary-table">
            <thead class="salary-table-header">
                <tr>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Created At</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let salaryDisbursement of salaryDisbursementList">
                    <tr>
                        <td>{{ salaryDisbursement.amount | currency:"INR" }}</td>
                        <td>{{ salaryDisbursement.status }}</td>
                        <td>{{ salaryDisbursement.processedAt | date: 'short' }}</td>
                        <td>
                            <button mat-button *ngIf="salaryDisbursement.status === 'Pending'" (click)="viewSalaryDisbursementDetails(salaryDisbursement)">View</button>
                            <button mat-button *ngIf="salaryDisbursement.status === 'Success'" (click)="viewCompletedSalaryDisbursement(salaryDisbursement)">View</button>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </table>
    </div>
</div>
